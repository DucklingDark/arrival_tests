# Тестовое задание №2
#### Выполняемый функционал:
- Опрос АЦП с частотой 100 Гц. Опрашиваемые значения копятся в количестве 32х измерений, после чего вычисляется среднее значение
- Изменение состояния порта с частотой 300 Гц
- Изменение состояния порта с частотой 1 кГц
- Изменение состояния порта с частотой 10 кГц
#### Содержимое папок:
- Папка Inc содержит заголовочные файлы
- Папка Src содержит файлы с исходным кодом
#### Содержимое файлов:
- **funcs.h** содержит структуры и определение функций
- **funcs.c** содержит описание функций
- **main.c** содержит главный цикл программы
- **stm32f1xx_it.c** содержит обработчик прерывания таймера

## Ключевые блоки кода:

#### Переменные:
`#define ADC_MEASUREMENTS_CNT` - количество измерений АЦП, необходимых для посчёта среднего
`uint16_t ticks_count` - количество "отсчётов" таймера, необходимые при проверки необходимости выполнения той или иной функции
`uint16_t adc_measurement` - переменная, в которую записывается результат запроса измерения у АЦП
`uint16_t adc_result` - результат вычисления среднего значения АЦП по количеству измерений, определённому в переменной `ADC_MEASUREMENTS_CNT`
`myAdc_t myAdc` - переменная, хранящая структуру данных АЦП
`myPort_t myPort` - переменная, хранящая структуру состояния порта

#### Структуры:
`typedef struct myAdc` - структура, хранящая в себе промежуточные данные, необходимые при работе с АЦП, такие как промежуточная сумма измерений АЦП и количество принятых измерений АЦП
`typedef struct myPort` - структура, хранящая состояние выходов порта

#### Функции:
`void TIM6_IRQHandler(void)` - функция обработчикпрерывания таймера
`void add_adc_measurement(myAdc_t* adc, uint16_t measurement)` - функция добавления измерения АЦП к промежуточной сумме
`uint16_t calculate_adc_measurements(myAdc_t* adc)` - функция расчёта среднего значения измерений АЦП
`uint16_t get_adc_measurement(void)` - пустая функция чтения данных с АЦП (в данном случае)

#### Дополнительные ключевые строки кода:
`HAL_TIM_Base_Start_IT(&htim6)` - запуск таймера в режиме работы с прерываниями
`if (ticks_count % PORT_ONE_CLOCK_CNT == 0)` - проверка количества отсчётов таймера на кратность делителю для получения частоты изменения первого выхода порта
`if (ticks_count % PORT_TWO_CLOCK_CNT == 0)` - проверка количества отсчётов таймера на кратность делителю для получения частоты изменения второго выхода порта
`if (ticks_count % PORT_THREE_CLOCK_CNT == 0)` - проверка количества отсчётов таймера на кратность делителю для получения частоты изменения третьего выхода порта
`if (ticks_count % ADC_CLOCK_CNT == 0)` - проверка количества отсчёта таймера на кратность делютелю для запроса нового измерения АЦП